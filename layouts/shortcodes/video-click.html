{{ $src := .Get "src" }}
{{ $poster := .Get "poster" }}
{{ $width := .Get "width" | default "100%" }} <!-- 新增：视频容器宽度，默认100% -->

<div class="video-click-wrapper" style="position: relative; width: {{ $width }}; margin: 0 auto; cursor: pointer;">
    <img src="{{ $poster }}" alt="视频封面" style="width: 100%; display: block; border-radius: 8px;">
    <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(0,0,0,0.7); color: white; width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 24px; border: 2px solid white;">▶</div>
    <video controls style="display: none; width: 100%; border-radius: 8px;" preload="none"></video>
</div>

<script>
(function() {
    const wrappers = document.querySelectorAll('.video-click-wrapper');
    wrappers.forEach(wrapper => {
        wrapper.addEventListener('click', function(e) {
            const video = this.querySelector('video');
            const img = this.querySelector('img');
            const playBtn = this.querySelector('div');
            if (video && !video.src) {
                video.src = '{{ $src }}';
                video.load();
                video.style.display = 'block';
                img.style.display = 'none';
                if (playBtn) playBtn.style.display = 'none';
                video.play().catch(() => {});
            }
        });
    });
})();
</script>